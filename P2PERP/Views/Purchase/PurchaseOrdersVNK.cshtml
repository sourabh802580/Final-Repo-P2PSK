@{
    ViewBag.Title = "Purchase OrdersVNK";
}

<div class="main-content">
    <div class="container mt-4 shadow-sm rounded bg-white p-3">
        <!-- Nav Pills -->
        <ul class="nav nav-pills mb-3" id="poTabs" role="tablist">
            <li class="nav-item me-2">
                <a class="nav-link active" id="pending-tab" data-bs-toggle="tab" href="#pending" role="tab">
                    <i class="bi bi-hourglass-split"></i> Pending Purchase Order
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="approved-tab" data-bs-toggle="tab" href="#approved" role="tab">
                    <i class="bi bi-check2-circle"></i> Approved Purchase Order
                </a>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content mt-3">
            <div class="tab-pane fade show active" id="pending" role="tabpanel">
                <div id="pendingContainer"></div>
            </div>

            <div class="tab-pane fade" id="approved" role="tabpanel">
                <div id="approvedContainer"></div>
            </div>
        </div>
    </div>
</div>

<!-- Shared Modal -->
<div class="modal fade" id="NewModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white justify-content-center">
                <h5 class="modal-title fw-bold mb-4 text-white">Purchase Order Details</h5>
                <button type="button" class="btn-close btn-close-white position-absolute end-0 me-3" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="NewModalBody">
                <!-- Partial view content will load here -->
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        // Load Pending partial
        $("#pendingContainer").load('/Purchase/PendingPOsPartialNAM');

        // Load Approved partial
        $("#approved-tab").on('shown.bs.tab', function () {
            if ($("#approvedContainer").is(':empty')) {
                $("#approvedContainer").load('/Purchase/ApprovedPOsPartialVNK');
            }
        });
    });
</script>